<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout â€“ H & Aur@</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --grad: linear-gradient(90deg,#f5b041,#f39c12,#e74c3c);
  --soft: linear-gradient(180deg,#ffffff,#fff4f5);
}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial;background:#fff7f5}
header{background:#111;color:#fff;padding:15px 20px}
.wrap{max-width:1100px;margin:auto;padding:28px 20px}
.grid{display:grid;gap:22px;grid-template-columns:1.1fr .9fr}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.card{
  background:var(--soft);
  border-radius:22px;
  padding:20px;
  box-shadow:0 18px 40px rgba(0,0,0,.12);
}
.badge{
  display:inline-block;padding:6px 14px;border-radius:999px;
  background:#fff3cd;font-weight:700;font-size:13px;margin-bottom:10px;
}
input,textarea{
  width:100%;padding:14px;border-radius:14px;
  border:1px solid #ddd;margin:8px 0;
}
.btn{
  width:100%;padding:16px;border-radius:999px;border:none;
  font-weight:900;cursor:pointer;background:var(--grad);color:#fff;
}
.pay{display:flex;gap:10px;margin:10px 0}
.pay button{
  flex:1;padding:14px;border-radius:999px;border:1px solid #ddd;
  background:#fff;font-weight:800;
}
.pay button.active{background:var(--grad);color:#fff;border:none}
.item{display:grid;grid-template-columns:1fr auto;gap:10px;margin:8px 0}
.qty button{
  width:28px;height:28px;border-radius:50%;
  border:none;background:var(--grad);color:#fff;font-weight:900;
}
.total{font-size:18px;font-weight:900}
.error{color:#c0392b;font-size:13px}

/* QR MODAL */
#qrModal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.6);z-index:9999;
}
#qrBox{
  background:#fff;max-width:360px;margin:80px auto;
  padding:20px;border-radius:20px;text-align:center;
}
#qrBox img{width:220px}
</style>
</head>

<body>

<header>
  <strong>H & Aur@</strong><br>
  <small>Where beauty meets aura....</small>
</header>

<div class="wrap">
<div class="grid">

<!-- LEFT -->
<div class="card">
<span class="badge">ðŸŽ‰ Free Shipping above â‚¹999</span>

<input id="name" placeholder="Full Name *">
<input id="phone" placeholder="Mobile Number *">
<textarea id="address" placeholder="Full Address *"></textarea>
<div id="err" class="error"></div>

<h3>Payment</h3>
<div class="pay">
<button id="codBtn" onclick="setPay('COD')">COD</button>
<button id="upiBtn" onclick="setPay('UPI')">UPI</button>
</div>

<button class="btn" onclick="placeOrder()">Place Order</button>
</div>

<!-- RIGHT -->
<div class="card">
<h3>Your Order</h3>
<div id="items"></div>
<p>Subtotal: â‚¹<span id="sub">0</span></p>
<p>Shipping: â‚¹<span id="ship">0</span></p>
<p class="total">Total: â‚¹<span id="tot">0</span></p>
</div>

</div>
</div>

<!-- QR FALLBACK -->
<div id="qrModal">
  <div id="qrBox">
    <h3>Scan & Pay</h3>
    <img id="qrImg">
    <p>UPI ID: <b>adityadhiman7876-1@oksbi</b></p>
    <button class="btn" onclick="closeQR()">Payment Done</button>
  </div>
</div>

<script>
const FORM_URL="https://docs.google.com/forms/d/e/1FAIpQLScVJ6GvrDCOWJN5ykJ-Zzoi9F2BWAT6M5JXJCwryCOScb8WkA/formResponse";
const UPI_ID="adityadhiman7876-1@oksbi";

const items=sub=ship=tot=null;
const name=document.getElementById("name"),
phone=document.getElementById("phone"),
address=document.getElementById("address"),
err=document.getElementById("err"),
codBtn=document.getElementById("codBtn"),
upiBtn=document.getElementById("upiBtn");

let cart=JSON.parse(localStorage.getItem("cart"))||[];
let payment="";

function render(){
 let s=0,html="";
 cart.forEach((p,i)=>{
  s+=p.price*p.qty;
  html+=`${p.name} Ã— ${p.qty}<br>`;
 });
 document.getElementById("items").innerHTML=html||"Empty";
 document.getElementById("sub").innerText=s;
 document.getElementById("ship").innerText=s>=999?0:79;
 document.getElementById("tot").innerText=s+(s>=999?0:79);
}
render();

function setPay(p){
 payment=p;
 codBtn.classList.toggle("active",p==="COD");
 upiBtn.classList.toggle("active",p==="UPI");
}

function placeOrder(){
 err.textContent="";
 if(!cart.length||!name.value||!phone.value||!address.value||!payment){
  err.textContent="Fill all details";return;
 }

 let total=+document.getElementById("tot").innerText;

 // SAVE ORDER STATUS
 localStorage.setItem("lastOrder",JSON.stringify({
  status: payment==="COD"?"Pending COD":"Pending UPI",
  total, payment,
  date:new Date().toLocaleString()
 }));

 // SEND ADMIN
 let fd=new FormData();
 fd.append("entry.1324507124",name.value);
 fd.append("entry.618528662",phone.value);
 fd.append("entry.1549317860",address.value);
 fd.append("entry.611339007",payment);
 fetch(FORM_URL,{method:"POST",mode:"no-cors",body:fd});

 // UPI FLOW
 if(payment==="UPI"){
   const upiUrl=`upi://pay?pa=${UPI_ID}&pn=H%20%26%20Aur@&am=${total}&cu=INR`;
   window.location.href=upiUrl;

   // QR FALLBACK (after 3 sec)
   setTimeout(()=>{
     document.getElementById("qrImg").src=
     `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(upiUrl)}`;
     document.getElementById("qrModal").style.display="block";
   },3000);
   return;
 }

 // COD
 alert("Order placed (COD)");
 localStorage.removeItem("cart");
 location.href="index.html";
}

function closeQR(){
 document.getElementById("qrModal").style.display="none";
 let o=JSON.parse(localStorage.getItem("lastOrder"));
 o.status="Paid (UPI)";
 localStorage.setItem("lastOrder",JSON.stringify(o));
 alert("Payment marked as successful");
 localStorage.removeItem("cart");
 location.href="index.html";
}
</script>

</body>
</html>
